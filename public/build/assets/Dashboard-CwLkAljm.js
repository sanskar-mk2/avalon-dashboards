import{_ as D}from"./AuthenticatedLayout-CEqU46G6.js";import{r as y,j as x,p as C,q as k,g as m,o as c,b as s,s as $,F as j,x as N,y as R,a as u,w as g,d as T,t as w,u as v,l as A,h as E,c as B,i as U}from"./app-B2GYkFaq.js";import{C as p,p as M,t as O,a as F,_ as W}from"./chartjs-plugin-datalabels.esm-Fgtg15OK.js";import{_ as V}from"./LocationCharts-DrlnyA3I.js";import{_ as z}from"./SalespersonCharts-DJAJEGOK.js";import{_ as G}from"./CustomerCharts-8TkLecSY.js";import{_ as H}from"./MonthYearSelector-BtkA9Y2o.js";import"./ApplicationLogo-DujZ5ZH6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dayjs.min-CrmqBdOv.js";const q={class:"flex justify-center mt-10"},K={class:"w-full mx-4 card bg-base-100 p-4"},L={class:"h-[250px]"},J={__name:"InventoryCharts",props:{us_warehouse_inventory:Object},setup(a){p.register(M);const i=a,l=y(null);let d=null;const b=y(null),f=x(()=>{const r=O[b.value];if(!r)return{};const e=Object.keys(r).filter(t=>!t.startsWith("--")&&t!=="color-scheme"&&t!=="fontFamily"),o={};return e.forEach(t=>{o[t]=new F(r[t]).toGamut({space:"srgb"}).to("srgb").toString({format:"hex"})}),console.log(o),o}),h=()=>{if(d&&d.destroy(),!l.value)return;const r={...i.us_warehouse_inventory};r.datasets=r.datasets.map((e,o)=>{let t;switch(e.label){case"Inventory Value":t=f.value.primary;break;case"Sales":t=f.value.secondary;break;case"COGS":t=f.value.accent;break;case"Inventory Turn":t=f.value.neutral;break;default:t=f.value.primary}return{...e,backgroundColor:e.label==="Inventory Turn"?t:t+"80",borderColor:t,borderWidth:e.label==="Inventory Turn"?2:1,type:e.label==="Inventory Turn"?"line":"bar",yAxisID:e.label==="Inventory Turn"?"y1":"y"}}),d=new p(l.value,{type:"bar",data:r,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:4.5,scales:{y:{position:"left",ticks:{callback:function(e){return(e/1e6).toFixed(1)+"M"}}},y1:{position:"right",grid:{drawOnChartArea:!1},ticks:{callback:function(e){return e.toFixed(1)+"x"}}}},plugins:{legend:{labels:{font:{size:10},boxWidth:10}},datalabels:{color:"white",formatter:function(e,o){return o.dataset.label==="Inventory Turn"?e.toFixed(1)+"x":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(e)},backgroundColor:function(e){return e.dataset.borderColor},borderRadius:4,padding:4,font:{weight:"bold",size:10},display:function(e){return e.dataset.data[e.dataIndex]!==0},anchor:"end",align:"end"}}}})};return new MutationObserver(r=>{r.some(e=>e.attributeName==="data-theme")&&(b.value=document.documentElement.getAttribute("data-theme"),h())}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),C(()=>i.us_warehouse_inventory,()=>{h()},{deep:!0}),k(()=>{b.value=document.documentElement.getAttribute("data-theme"),h()}),(r,e)=>(c(),m("div",q,[s("div",K,[e[0]||(e[0]=s("h2",{class:"text-lg sm:text-xl font-semibold mb-4"}," Inventory Metrics ",-1)),s("div",L,[s("canvas",{ref_key:"inventoryChartRef",ref:l},null,512)])])]))}},P={class:"flex justify-center flex-wrap sm:flex-nowrap mt-10 gap-8"},Q={class:"sm:basis-1/3 w-full mx-4 sm:mx-0 card bg-base-100 p-4"},X={key:0,class:"text-center py-12 text-base-content/50"},Y={key:1,class:"h-full sm:h-[250px] overflow-y-auto"},Z={class:"min-w-full bg-base-100 border border-base-300 rounded-lg overflow-hidden"},tt={class:"divide-y divide-base-300"},et={class:"px-4 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-base-content"},at={class:"px-4 sm:px-6 py-3 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-base-content"},st={class:"sm:basis-2/3 w-full mx-4 sm:mx-0 card bg-base-100 p-4"},ot={key:0,class:"text-center py-12 text-base-content/50"},rt={key:1,class:"h-[250px]"},nt={__name:"ManufacturingCharts",props:{sales_by_mfg_code:Object,top_sales_by_mfg_code:Object,month:String,additional_filters:Object},setup(a){p.register(M);const i=a,l=y(null);let d=null;const b=y(null),f=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),h=x(()=>{var o,t;return((t=(o=i.sales_by_mfg_code)==null?void 0:o.labels)==null?void 0:t.length)>0}),r=x(()=>{const o=O[b.value];if(!o)return{};const t=Object.keys(o).filter(_=>!_.startsWith("--")&&_!=="color-scheme"&&_!=="fontFamily"),n={};return t.forEach(_=>{n[_]=new F(o[_]).toGamut({space:"srgb"}).to("srgb").toString({format:"hex"})}),n}),e=()=>{if(d&&(d.destroy(),d=null),!h.value||!l.value)return;const o={...i.sales_by_mfg_code};o.datasets=o.datasets.map(t=>({...t,backgroundColor:r.value.primary+"80",borderColor:r.value.primary,borderWidth:1})),o.datasets.reverse(),d=new p(l.value,{type:"bar",data:o,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:3,onHover:(t,n)=>{t.native.target.style.cursor=n.length?"pointer":"default"},onClick:(t,n,_)=>{if(n.length>0){const I=n[0].index,S=_.data.labels[I];R.get(route("sales.index"),{"filter[mfg_code]":S,"filter[period]":i.month,...i.additional_filters})}},scales:{y:{ticks:{callback:function(t){return t>=1e6?(t/1e6).toFixed(1)+"M":(t/1e3).toFixed(1)+"K"}}}},plugins:{legend:{labels:{font:{size:10},boxWidth:10}},datalabels:{color:"white",formatter:function(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t)},backgroundColor:function(t){return t.dataset.borderColor},borderRadius:4,padding:4,font:{weight:"bold",size:10},display:function(t){return t.dataset.data[t.dataIndex]!==0},anchor:"end",align:"end"}}}})};return new MutationObserver(o=>{o.some(t=>t.attributeName==="data-theme")&&(b.value=document.documentElement.getAttribute("data-theme"),e())}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),C(()=>i.sales_by_mfg_code,()=>{$(()=>{e()})},{deep:!0}),k(()=>{b.value=document.documentElement.getAttribute("data-theme"),e()}),(o,t)=>(c(),m("div",P,[s("div",Q,[t[1]||(t[1]=s("h2",{class:"text-lg sm:text-xl font-semibold mb-4"}," Sales By Manufacturer ",-1)),h.value?(c(),m("div",Y,[s("table",Z,[t[0]||(t[0]=s("thead",{class:"bg-primary sticky top-0"},[s("tr",null,[s("th",{class:"px-4 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-primary-content uppercase tracking-wider"}," Manufacturer "),s("th",{class:"px-4 sm:px-6 py-2 sm:py-3 text-left text-xs font-medium text-primary-content uppercase tracking-wider"}," Sales ")])],-1)),s("tbody",tt,[(c(!0),m(j,null,N(a.top_sales_by_mfg_code,n=>(c(),m("tr",{key:n.mfg_code,class:"hover:bg-base-200"},[s("td",et,[u(v(A),{href:o.route("manufacturers.show",n.mfg_code),class:"link"},{default:g(()=>[T(w(n.mfg_code),1)]),_:2},1032,["href"])]),s("td",at,w(v(f).format(n.total_sales)),1)]))),128))])])])):(c(),m("div",X," No data available "))]),s("div",st,[t[2]||(t[2]=s("h2",{class:"text-lg sm:text-xl font-semibold mb-4"}," Sales By Manufacturer ",-1)),h.value?(c(),m("div",rt,[s("canvas",{ref_key:"mfgCodeChartRef",ref:l},null,512)])):(c(),m("div",ot," No data available "))])]))}},lt={class:"flex w-full mr-4 justify-between items-center"},ct={class:"py-12"},it={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},gt={__name:"Dashboard",props:{cards_data:Object,location_chart_data:Object,top_sales_by_location:Object,sales_by_salesperson:Object,top_sales_by_salesperson:Object,sales_by_customer:Object,top_sales_by_customer:Object,sales_by_mfg_code:Object,top_sales_by_mfg_code:Object,us_warehouse_inventory:Object,availableMonths:Array,currentMonth:String},setup(a){return(i,l)=>(c(),m(j,null,[u(v(E),{title:"Dashboard"}),u(D,null,{header:g(()=>[s("div",lt,[l[0]||(l[0]=s("h2",{class:"text-xl font-semibold leading-tight"},[s("div",{class:"breadcrumbs text-sm text-base-content"},[s("ul",null,[s("li",null,"Home")])])],-1)),a.availableMonths&&a.currentMonth?(c(),B(H,{key:0,"available-months":a.availableMonths,"current-month":a.currentMonth,"show-y-t-d":!0},null,8,["available-months","current-month"])):U("",!0)])]),default:g(()=>[s("div",ct,[s("div",it,[u(W,{cards_data:a.cards_data,month:a.currentMonth},null,8,["cards_data","month"]),u(V,{location_chart_data:a.location_chart_data,top_sales_by_location:a.top_sales_by_location,month:a.currentMonth},null,8,["location_chart_data","top_sales_by_location","month"]),u(z,{sales_by_salesperson:a.sales_by_salesperson,top_sales_by_salesperson:a.top_sales_by_salesperson,month:a.currentMonth},null,8,["sales_by_salesperson","top_sales_by_salesperson","month"]),u(G,{month:a.currentMonth,sales_by_customer:a.sales_by_customer,top_sales_by_customer:a.top_sales_by_customer},null,8,["month","sales_by_customer","top_sales_by_customer"]),u(nt,{sales_by_mfg_code:a.sales_by_mfg_code,top_sales_by_mfg_code:a.top_sales_by_mfg_code,month:a.currentMonth},null,8,["sales_by_mfg_code","top_sales_by_mfg_code","month"]),u(J,{us_warehouse_inventory:a.us_warehouse_inventory},null,8,["us_warehouse_inventory"])])])]),_:1})],64))}};export{gt as default};
