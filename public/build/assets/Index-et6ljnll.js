import{r as c,c as d,o as p,w as l,b as n,a,u as _,P as o,d as b}from"./app-Dmk3Lh4x.js";import{_ as f}from"./PageLayout-Cvlu0DAn.js";import{_ as y}from"./DataTable-CCQoREAW.js";import{_ as h}from"./DeleteModal-SPVR4Df5.js";import{d as k}from"./dayjs.min-BeO_1J8d.js";import"./AuthenticatedLayout-XMoXfa6y.js";import"./ApplicationLogo-2yxzNTiB.js";import"./MonthYearSelector-DQuYX3r5.js";import"./Breadcrumbs-BaEHd0eu.js";const x={class:"flex justify-end gap-2 sm:gap-4 mb-4"},S={__name:"Index",props:{open_orders:{type:Object,default:()=>({})},availableMonths:{type:Array,default:()=>[]},currentMonth:{type:String,required:!0}},setup(r){const s=c(!1),u=[{key:"actions",label:"Actions",custom_value:e=>({component:o,props:{href:route("open_orders.edit",e.id),class:"btn btn-sm btn-primary"},children:"Edit"})},{key:"location",label:"Location",custom_value:e=>e.location_model!=null?{component:o,props:{href:route("locations.show",e.location_model.id),class:"link"},children:e.location_model.location_abbreviation}:e.location},{key:"order_no",label:"Order No"},{key:"order_date",label:"Order Date",custom_value:e=>e.order_date.replace(/-/g,"‑")},{key:"customer_no",label:"Cust No"},{key:"customer_name",label:"Customer Name",custom_value:e=>({component:o,props:{href:route("customers.show",e.customer_name),class:"link"},children:e.customer_name})},{key:"salesperson",label:"Salesperson",custom_value:e=>e.salesperson_model!=null?{component:o,props:{href:route("salespeople.show",e.salesperson_model.id),class:"link"},children:e.salesperson_model.salesman_name}:e.salesperson},{key:"item_no",label:"Item No"},{key:"item_desc",label:"Item Desc",ellipsis_after:10},{key:"qty",label:"Qty",remove_decimals:!0},{key:"ext_sales",label:"Ext Sales",to_format:!0},{key:"ext_cost",label:"Ext Cost",to_format:!0},{key:"ext_profit",label:"GP %",custom_value:e=>{const t=(e.ext_sales-e.ext_cost)/e.ext_sales*100;return isNaN(t)?"-":t.toFixed(2)+"%"}},{key:"period",label:"Period",custom_value:e=>k(e.period).format("MMM‑YY")},{key:"mfg_code",label:"Mfg Code"},{key:"requested_ship_date",label:"Req Ship Date"}],m=[{label:"Home",route:"dashboard"},{label:"Open Orders"}];return(e,t)=>(p(),d(f,{title:"Open Orders",breadcrumbs:m,"available-months":r.availableMonths,"current-month":r.currentMonth},{default:l(()=>[n("div",x,[a(_(o),{href:e.route("open_orders.create"),class:"btn btn-primary btn-sm sm:btn-md text-xs sm:text-sm"},{default:l(()=>t[2]||(t[2]=[b(" Upload CSV ")])),_:1},8,["href"]),n("button",{onClick:t[0]||(t[0]=i=>s.value=!0),class:"btn btn-error btn-sm sm:btn-md text-xs sm:text-sm"}," Delete All ")]),a(y,{data:r.open_orders,columns:u},null,8,["data"]),a(h,{show:s.value,message:"Are you sure you want to delete all open order records? This action cannot be undone.","delete-route":"open_orders.deleteAll",onClose:t[1]||(t[1]=i=>s.value=!1)},null,8,["show"])]),_:1},8,["available-months","current-month"]))}};export{S as default};
